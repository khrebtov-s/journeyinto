<app-form-header [title]="'Register'"
  [canGoBack]="true"></app-form-header>
<div class="wrapper">
  <app-errors [errors]="errors"></app-errors>

  <div class="explainer">
    <p class="text-display-3">Welcome to Journey Into.</p>
    <p class="text-display-3"><strong>Yoga students</strong><br> Subscribe to your yoga teacher for weekly video and audio classes to guide your self practice any time, anywhere.</p>
    <p class="text-display-3"><strong>Yoga teachers</strong><br> Create a profile and record classes your students can subscribe to.</p>
  </div>

  <form [formGroup]="signUpForm" class="form-two">
    <fieldset>
      <p class="text-display-2">Login details</p>
      <hr />

      <ng-container *ngIf="signUpForm.get('email'); let email">
        <app-ji-input 
          #validatedField
          [parentForm]="signUpForm" 
          [input]="'email'" 
          [type]="'email'" 
          [title]="'Email'" 
          [errors]="email.errors"
          [hasError]="email.invalid && signupFormSubmitted"></app-ji-input>
      </ng-container>
      <ng-container *ngIf="signUpForm.get('password'); let password">
        <app-ji-input 
          #validatedField
          [parentForm]="signUpForm" 
          [input]="'password'" 
          [type]="'password'" 
          [title]="'Password'" 
          [errors]="password.errors"
          [hasError]="password.invalid && signupFormSubmitted"></app-ji-input>
      </ng-container>
      <ng-container *ngIf="signUpForm.get('telephone'); let telephone">
        <app-ji-input 
          [parentForm]="signUpForm" 
          [input]="'telephone'" 
          [type]="'tel'" 
          [title]="'Mobile telephone'"
          [explainerText]="'We are developing in app messaging but in the meantime add your number so your students can contact you directly.'"></app-ji-input>
      </ng-container>
    </fieldset>

    <fieldset>
      <ng-container *ngIf="signUpForm.get('first_name'); let firstName">
        <app-ji-input 
          #validatedField
          [parentForm]="signUpForm" 
          [input]="'first_name'" 
          [title]="'First name'" 
          [errors]="firstName.errors"
          [hasError]="firstName.invalid && signupFormSubmitted"></app-ji-input>
      </ng-container>
      <ng-container *ngIf="signUpForm.get('last_name'); let lastName">
        <app-ji-input 
          #validatedField
          [parentForm]="signUpForm" 
          [input]="'last_name'" 
          [title]="'Last name'" 
          [errors]="lastName.errors"
          [hasError]="lastName.invalid && signupFormSubmitted"></app-ji-input>
      </ng-container>
    </fieldset>

    <fieldset>
      <ng-container *ngIf="signUpForm.get('terms'); let terms">
        <app-ji-checkbox 
          #validatedField
          [parentForm]="signUpForm"
          [name]="'terms'"
          [hasError]="terms.invalid && signupFormSubmitted">
          I accept the Terms & Conditions. (<a 
            [href]="externalRouteNames.tnc" 
            target="_blank">Click here to read more.</a>)
        </app-ji-checkbox>
      </ng-container>
      <ng-container *ngIf="signUpForm.get('marketing'); let marketing">
        <app-ji-checkbox 
          [parentForm]="signUpForm"
          [name]="'marketing'">
          Join the mailing list for member news and offers
        </app-ji-checkbox>
      </ng-container>
    </fieldset>

    <div class="m-t-40 m-b-40">
      <button
        mat-ripple
        type="submit"
        class="btn btn-large btn-rounded bg-20 width-100"
        (click)="handleSubmitClick(viewStatuses.STUDENT)"
        [disabled]="status === requestStatus.pending">
        Want to practice? Find your teacher</button>
    </div>
    
    <div class="m-t-24 m-b-24">
      <button
        mat-ripple
        type="button"
        class="btn btn-large btn-rounded bg-20 width-100"
        [disabled]="status === requestStatus.pending"
        (click)="handleSubmitClick(viewStatuses.TEACHER)">
        Are you a teacher? Create your profile</button>
    </div>

  </form>
</div>
